{% load i18n static poll_votings %}
{% if error_message %}
  <ul class="error-list">
    <li class="error-list__item">{{ error_message }}</li>
  </ul>
{% endif %}
<form class="polls__form" action="{% url 'molo.polls:free_text_vote' question.id %}" method="post" novalidate>
  {% csrf_token %}
    {% if request.user.is_authenticated %}
      {% can_vote question as user_can_vote %}
      {% if user_can_vote %}
        <fieldset>
          {% if question.freetextquestion.get_main_language_page.numerical %}
            <input type="number" name="answer" id="id_answer" value="" />
          {% else %}
            <input type="text" name="answer" id="id_answer" value="" />
          {% endif %}
        </fieldset>
        <div class="call-to-action--group">
          <button type="submit" class="call-to-action__button call-to-action__button--primary">{% trans "Submit" %}</button>
        </div>
      {% else %}
        <h3 class="heading__subtitle">{% trans "Thank you!" %}</h3>
        <p class="error-list__item">
          {% trans "Your response has already been submitted." %}
        </p>
      {% endif %}
    {% else %}
      <div class="call-to-action--group">
        <a href="{% url 'molo.profiles:auth_login' %}?next={{request.path}}" class="call-to-action__button call-to-action__button--primary">
          {% trans "Log in to vote" %}
        </a>
      </div>
    {% endif %}
</form>
